# =============================================================================
# VerifyID - VARIABLES DE ENTORNO
# =============================================================================
#
# Este archivo es una PLANTILLA. Para usar:
# 1. Copiar este archivo como ".env" (sin el .example)
# 2. Llenar con tus credenciales reales
# 3. NUNCA subir .env a Git (debe estar en .gitignore)
#
# =============================================================================

# -----------------------------------------------------------------------------
# GOOGLE CLOUD VISION API
# -----------------------------------------------------------------------------
# Documentación: docs/GOOGLE_CLOUD_SETUP.md
#
# Opción 1: Application Default Credentials (RECOMENDADO)
# Ejecutar: gcloud auth application-default login
# (Deja esta línea comentada si usas ADC)
# GOOGLE_APPLICATION_CREDENTIALS=

# Opción 2: Service Account JSON
# GOOGLE_APPLICATION_CREDENTIALS=C:\path\to\tu-proyecto-123456-a1b2c3d4e5f6.json

# -----------------------------------------------------------------------------
# AZURE COMPUTER VISION API
# -----------------------------------------------------------------------------
# Documentación: docs/AZURE_VISION_SETUP.md
#
# Endpoint de tu recurso Computer Vision
AZURE_VISION_ENDPOINT=https://tu-recurso.cognitiveservices.azure.com/

# Subscription key (KEY 1 o KEY 2 desde Azure Portal)
AZURE_VISION_KEY=tu_subscription_key_aqui

# -----------------------------------------------------------------------------
# SELECCIÓN DE PROVEEDOR OCR
# -----------------------------------------------------------------------------
# Opciones: google_vision, azure_vision, ensemble, digit_ensemble
OCR_PROVIDER=digit_ensemble

# GCP Project ID (required for some Google Cloud services)
GCP_PROJECT_ID=your-project-id

# -----------------------------------------------------------------------------
# OCR DIGIT-LEVEL ENSEMBLE CONFIGURATION
# -----------------------------------------------------------------------------
# Minimum confidence required for a single digit (0.0-1.0)
# Lower = more permissive (higher recall), Higher = stricter (higher precision)
OCR_MIN_DIGIT_CONFIDENCE=0.58

# Minimum agreement ratio between OCR providers (0.0-1.0)
# At least this % of digits must match between providers
OCR_MIN_AGREEMENT_RATIO=0.60

# Confidence boost when both OCRs agree on a digit (0.0-0.1)
OCR_CONFIDENCE_BOOST=0.03

# Maximum ratio of conflicting digits allowed (0.0-1.0)
OCR_MAX_CONFLICT_RATIO=0.40

# Ambiguity threshold for flagging uncertain digits (0.0-0.5)
OCR_AMBIGUITY_THRESHOLD=0.10

# Allow low-confidence override (true/false)
# If true: picks best of two bad options when both are below threshold
OCR_ALLOW_LOW_CONFIDENCE_OVERRIDE=true

# Verbose logging for digit ensemble (true/false)
OCR_VERBOSE_LOGGING=false

# -----------------------------------------------------------------------------
# OCR TIMEOUT SETTINGS
# -----------------------------------------------------------------------------
# Maximum time to wait for parallel OCR execution (seconds)
OCR_PARALLEL_TIMEOUT=30

# Maximum time to wait for single OCR provider (seconds)
OCR_SINGLE_TIMEOUT=15

# =============================================================================
# API REST CONFIGURATION
# =============================================================================

# -----------------------------------------------------------------------------
# ENVIRONMENT
# -----------------------------------------------------------------------------
# Options: development, staging, production
# Controls debug mode, CORS policies, database echo, and security validations
ENVIRONMENT=development

# -----------------------------------------------------------------------------
# API SERVER
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
API_PREFIX=/api/v1

# Application Info
APP_NAME=VerifyID API
VERSION=0.1.0
DEBUG=true

# -----------------------------------------------------------------------------
# DATABASE (PostgreSQL)
# -----------------------------------------------------------------------------
# Connection string format: postgresql://user:password@host:port/database
# For async: postgresql+asyncpg://user:password@host:port/database
DATABASE_URL=postgresql://postgres:your_password@localhost:5432/verifyid_core
DATABASE_POOL_SIZE=5
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600
DATABASE_ECHO=false

# -----------------------------------------------------------------------------
# SECURITY (JWT & API Keys)
# -----------------------------------------------------------------------------
# CRITICAL: Generate a strong SECRET_KEY in production
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=CHANGE_THIS_IN_PRODUCTION_MINIMUM_32_CHARACTERS

# JWT Settings
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60
REFRESH_TOKEN_EXPIRE_DAYS=7

# API Key Configuration
API_KEY_HEADER_NAME=X-API-Key
API_KEY_PREFIX=vfy_
API_KEY_LENGTH=48

# Password Hashing
BCRYPT_ROUNDS=12

# -----------------------------------------------------------------------------
# CORS (Cross-Origin Resource Sharing)
# -----------------------------------------------------------------------------
# Development: Allow localhost origins
# Production: Specify exact origins, NO wildcards
CORS_ORIGINS=["http://localhost:3000","http://localhost:8080"]
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["*"]
CORS_ALLOW_HEADERS=["*"]

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
# Log format: json (production) or text (development)
LOG_FORMAT=json
# Log file path (null to disable file logging)
LOG_FILE=logs/api.log
# Log rotation and retention
LOG_ROTATION=500 MB
LOG_RETENTION=10 days

# -----------------------------------------------------------------------------
# FILE UPLOAD
# -----------------------------------------------------------------------------
# Maximum file size in megabytes
MAX_FILE_SIZE_MB=10
# Allowed MIME types (JSON array format)
ALLOWED_FILE_TYPES=["image/jpeg","image/png","image/jpg","application/pdf"]

# =============================================================================
